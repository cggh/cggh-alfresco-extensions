<alfresco-config>


	<config replace="true">
		<flags>
			<!-- Developer debugging setting to turn on DEBUG mode for client scripts 
				in the browser -->

			<client-debug>false</client-debug>

			<!-- LOGGING can always be toggled at runtime when in DEBUG mode (Ctrl, 
				Ctrl, Shift, Shift). This flag automatically activates logging on page load. -->
			<client-debug-autologging>false</client-debug-autologging>
		</flags>

	</config>

	<config evaluator="string-compare" condition="DocLibCustom">
		<dependencies>
			<js src="components/documentlibrary/cggh-collab-renderer.js" />
		</dependencies>
	</config>
	<!-- Document Library config section -->
	<config evaluator="string-compare" condition="DocumentLibrary">

		<tree>
			<!-- Whether the folder Tree component should enumerate child folders 
				or not. This is a relatively expensive operation, so should be set to "false" 
				for Repositories with broad folder structures. -->
			<evaluate-child-folders>false</evaluate-child-folders>

			<!-- Optionally limit the number of folders shown in treeview throughout 
				Share. -->
			<maximum-folder-count>-1</maximum-folder-count>
		</tree>

		<!-- Used by the "Manage Aspects" action For custom aspects, remember to 
			also add the relevant i18n string(s) cm_myaspect=My Aspect -->
		<aspects>
			<!-- Aspects that a user can see -->
			<visible>
				<aspect name="cggh:collaboration" />
			</visible>

			<!-- Aspects that a user can add. Same as "visible" if left empty -->
			<addable>
			</addable>

			<!-- Aspects that a user can remove. Same as "visible" if left empty -->
			<removeable>
			</removeable>
		</aspects>

		<!-- Used by the "Change Type" action Define valid subtypes using the following 
			example: <type name="cm:content"> <subtype name="cm:mysubtype" /> </type> 
			Remember to also add the relevant i18n string(s): cm_mysubtype=My SubType -->
		<types>
			<type name="cm:content">
			    <subtype name="cggh:publication" />
			</type>

			<type name="cm:folder">
				<subtype name="cggh:collaborationFolder" />
			</type>
		</types>

		<metadata-templates>
			<template id="isCollaboration">
				<evaluator>evaluator.doclib.metadata.hasCollaborationAspect
				</evaluator>
				<line index="10" id="date" view="detailed">{date}{size}</line>
				<line index="50" id="contact" view="detailed">{cggh_collaborationStatus
					cggh.metadata.statusType} {cggh_enquiryStatus}
					{cggh_strategicNature}{cggh_samplesExpected
					cggh.metadata.samplesExpected}

					{cggh_liaison cggh.metadata.liaison}
				</line>
				<line index="60" id="exec" view="detailed">
					{cggh_groupPI
					cggh.metadata.PIType} {cggh_groupContact
					cggh.metadata.contactsType} {cggh_groupData
					cggh.metadata.dataType} {cggh_groupMail
					cggh.metadata.mailType} {cggh_groupPublic
					cggh.metadata.publicType}
				</line>
				<line index="70" id="species" view="detailed">{cggh_species}
					{cggh_sampleCountry}
				</line>
				<line index="80" id="internal" view="detailed">{cggh_internalDescription}
				</line>
			</template>

		</metadata-templates>

	</config>
	<config evaluator="string-compare" condition="DocLibActions">



		<actionGroups>
			<actionGroup id="folder-browse">
				<action index="350" id="document-view-googlemaps" />
			</actionGroup>
			<actionGroup id="folder-details">
				<action index="350" id="document-view-googlemaps" />
			</actionGroup>
		</actionGroups>
	</config>
	<config evaluator="string-compare" condition="Action Wizards">
		<aspects>
			<aspect name="cm:generalclassifiable" />
			<aspect name="cm:complianceable" />
			<aspect name="cm:dublincore" />
			<aspect name="cm:effectivity" />
			<aspect name="cm:summarizable" />
			<aspect name="cm:versionable" />
			<aspect name="cm:templatable" />
			<aspect name="cm:emailed" />
			<aspect name="emailserver:aliasable" />
			<aspect name="cm:taggable" />
			<aspect name="app:inlineeditable" />
			<aspect name="gd:googleEditable" />
			<aspect name="cm:geographic" />
			<aspect name="exif:exif" />
			<aspect name="cggh:collaboration" />
		</aspects>
	</config>

	<!-- Repository Library config section -->
	<config evaluator="string-compare" condition="RepositoryLibrary"
		replace="true">
		<!-- Whether the link to the Repository Library appears in the header component 
			or not. -->
		<visible>true</visible>
	</config>

	<config evaluator="string-compare" condition="Remote">
		<remote>
			<endpoint>
				<id>alfresco-noauth</id>
				<name>Alfresco - unauthenticated access</name>
				<description>Access to Alfresco Repository WebScripts that do not
					require authentication
				</description>
				<connector-id>alfresco</connector-id>
				<endpoint-url>http://localhost:8080/alfresco/s</endpoint-url>
				<identity>none</identity>
			</endpoint>

			<endpoint>
				<id>alfresco</id>
				<name>Alfresco - user access</name>
				<description>Access to Alfresco Repository WebScripts that require
					user authentication
				</description>
				<connector-id>alfresco</connector-id>
				<endpoint-url>http://localhost:8080/alfresco/s</endpoint-url>
				<identity>user</identity>
			</endpoint>

			<endpoint>
				<id>alfresco-feed</id>
				<name>Alfresco Feed</name>
				<description>Alfresco Feed - supports basic HTTP authentication via
					the EndPointProxyServlet
				</description>
				<connector-id>http</connector-id>
				<endpoint-url>http://localhost:8080/alfresco/s</endpoint-url>
				<basic-auth>true</basic-auth>
				<identity>user</identity>
                <external-auth>true</external-auth>
			</endpoint>

			<endpoint>
				<id>activiti-admin</id>
				<name>Activiti Admin UI - user access</name>
				<description>Access to Activiti Admin UI, that requires user
					authentication
				</description>
				<connector-id>activiti-admin-connector</connector-id>
				<endpoint-url>http://localhost:8080/alfresco/activiti-admin
				</endpoint-url>
				<identity>user</identity>
			</endpoint>
		</remote>
	</config>
	<config evaluator="string-compare" condition="AdvancedSearch">
		<advanced-search>
			<!-- Additional Forms for the advanced search type list -->
			<forms>
				<form label="Collaboration Folders" description="Searches for all Collaboration Folders">cggh:collaborationFolder
				</form>
			</forms>
		</advanced-search>
	</config>

	<config evaluator="node-type" condition="cggh:collaborationFolder">
		<forms>
			<!-- doesn't work here - only works for config sections without an evaluator 
				and condition -->
			<!-- <dependencies> <css src="/components/forms/custom-label-layout.css" 
				/> </dependencies> -->
			<form>
				<!-- <edit-form template="/org/cggh/cms/components/form/controls/common/2-column-edit-form.ftl" 
					/> -->
				<field-visibility>
					<!-- cm:folder -->
					<show id="cm:name" />
					<show id="cm:title" force="true" />
					<show id="cm:description" force="true" />
					<show id="cm:taggable" for-mode="view" force="true" />
					<show id="cm:categories" />

					<!-- cggh:collaborationFolder -->
					<show id="cggh:collaborationStatus" />
					<show id="cggh:enquiryStatus" />
					<show id="cggh:liaison" force="true" />
					<show id="cggh:species" />
					<show id="cggh:sampleCountry" />
					<show id="cggh:samplesExpected" />
					<show id="cggh:firstSample" />
					<show id="cggh:lastSample" />
					<show id="cggh:reviewed" />
					<show id="cggh:strategicNature" />
					<show id="cggh:internalDescription" />
					<show id="cggh:collaborationNotes" />
					<show id="cggh:webTitle" />
					<show id="cggh:webTitleApproved" />
					<show id="cggh:descriptionApproved" />
					<show id="cggh:legacyID" />
					<show id="cggh:projects" />
					<show id="cggh:webStudy" />
					<show id="cggh:publications" />
				</field-visibility>
				<appearance>
					<!-- Field sets -->
					<!-- Seems to have trouble with associations -->
					<set id="cgghMetadata" appearance="bordered-panel"
						label-id="cggh.collaborationFolder.metadata.header"
						template="/org/cggh/cms/components/form/controls/common/custom-set-study.ftl" />

					<!-- Field set "" -->
					<field id="cm:title">
						<control template="/org/alfresco/components/form/controls/textfield.ftl" />
					</field>
					<field id="cggh:webTitle" label-id="cggh.metadata.webTitle">
					   <control template="/org/alfresco/components/form/controls/textfield.ftl" />
					<!-- Too flaky 
						<control template="/org/alfresco/components/form/controls/richtext.ftl">
                            <control-param name="editorAppearance">custom</control-param>
                            <control-param name="editorParameters">
                                theme_advanced_resizing: true,
                                theme_advanced_buttons1: "bold,italic,underline",
                                theme_advanced_buttons2: null,
                                theme_advanced_buttons3: null
                            </control-param>
                        </control>
                        -->
					</field>
					<field id="cggh:legacyID" set="cgghMetadata">
						<control template="/org/alfresco/components/form/controls/textfield.ftl">
							<control-param name="style">width: 8em;</control-param>
						</control>
					</field>
					<field id="cggh:webTitleApproved" set="cgghMetadata"
						label-id="cggh.metadata.webTitleApproved" />
					<field id="cggh:descriptionApproved" set="cgghMetadata"
						label-id="cggh.metadata.descriptionApproved" />

					<field id="cm:description">
						<control template="/org/alfresco/components/form/controls/richtext.ftl">
							<control-param name="editorAppearance">custom</control-param>
							<control-param name="editorParameters">
								theme_advanced_resizing: true,
								theme_advanced_buttons1: "bold,italic,underline",
								theme_advanced_buttons2: null,
								theme_advanced_buttons3: null
							</control-param>
						</control>
					</field>
					<field id="cm:taggable">
						<control>
							<control-param name="compactMode">true</control-param>
							<control-param name="params">aspect=cm:taggable
							</control-param>
							<control-param name="createNewItemUri">/api/tag/workspace/SpacesStore
							</control-param>
							<control-param name="createNewItemIcon">tag</control-param>
						</control>
					</field>
					<field id="cm:categories">
						<control>
							<control-param name="compactMode">true</control-param>
						</control>
					</field>

					<!-- Field set "cgghMetadata" -->
					<field id="cggh:collaborationStatus" label-id="cggh.metadata.collaborationStatus"
						set="cgghMetadata" />
					<field id="cggh:enquiryStatus" label-id="cggh.metadata.enquiryStatus"
						set="cgghMetadata" />
					<field id="cggh:liaison" label-id="cggh.metadata.liaison"
						set="cgghMetadata">
						<control template="/org/alfresco/components/form/controls/authority.ftl">
							<control-param name="compactMode">true</control-param>
							<control-param name="forceEditable">true</control-param>
						</control>
					</field>
					<field id="cggh:webStudy" label-id="cggh.metadata.webStudy"
						set="cgghMetadata">
						<control template="/org/alfresco/components/form/controls/association.ftl">
							<control-param name="startLocation">{parent}</control-param>
						</control>
					</field>
					<field id="cggh:publications" label-id="cggh.metadata.publications"
						set="cgghMetadata">
						<control template="/org/alfresco/components/form/controls/association.ftl">
							<control-param name="startLocation">/app:company_home/st:sites/cm:sequencing/cm:documentLibrary/cm:Publications
							</control-param>
						</control>
					</field>
					<field id="cggh:projects" label-id="cggh.metadata.projects"
						set="cgghMetadata">
						<control template="/org/alfresco/components/form/controls/association.ftl">
							<control-param name="startLocation">{siteshome}</control-param>
						</control>
					</field>
					<field id="cggh:sampleCountry" label-id="cggh.metadata.studySites"
						set="cgghMetadata">
						<control template="/org/alfresco/components/form/controls/selectmany.ftl">
							<control-param name="size">8</control-param>
						</control>
					</field>

					<field id="cggh:species" label-id="cggh.metadata.species"
						set="cgghMetadata" />
					<field id="cggh:samplesExpected" label-id="cggh.metadata.samplesExpected"
						set="cgghMetadata">
						<control template="/org/alfresco/components/form/controls/number.ftl">
							<control-param name="style">width: 8em;</control-param>
						</control>
					</field>
					<field id="cggh:firstSample" label-id="cggh.metadata.firstSample"
						set="cgghMetadata" />
					<field id="cggh:lastSample" label-id="cggh.metadata.lastSample"
						set="cgghMetadata" />
					<field id="cggh:reviewed" label-id="cggh.metadata.reviewed"
						set="cgghMetadata" />
					<field id="cggh:strategicNature" label-id="cggh.metadata.strategicNature"
						set="cgghMetadata" />
					<field id="cggh:internalDescription" label-id="cggh.metadata.intDescrip"
						set="cgghMetadata">
						<control template="/org/alfresco/components/form/controls/textarea.ftl" />
					</field>
					<field id="cggh:collaborationNotes" label-id="cggh.metadata.notes"
						set="cgghMetadata">
						<control template="/org/alfresco/components/form/controls/textarea.ftl" />
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<!-- SEARCH form definition -->
	<config evaluator="model-type" condition="cggh:collaborationFolder">
		<forms>
			<form id="search">
				<field-visibility>
					<show id="cm:name" />
					<show id="cm:title" force="true" />
					<show id="cm:description" force="true" />

					<!-- cggh:collaborationFolder -->

					<show id="cggh:contacts" force="true" />
					<show id="cggh:species" />
					<show id="cggh:sampleCountry" />
				</field-visibility>
				<appearance>
					<set id="cgghMetadata" appearance="bordered-panel"
						label-id="cggh.metadata.collaborationFolder" />

					<field id="cggh:contacts" label-id="cggh.metadata.contacts"
						set="cgghMetadata">
					</field>
					<field id="cggh:species" label-id="cggh.metadata.species"
						set="cgghMetadata" />
					<field id="cggh:sampleCountry" label-id="cggh.metadata.sampleCountry"
						set="cgghMetadata" />

				</appearance>
			</form>
		</forms>
	</config>
	<!-- cggh:site type create form config -->
	<config evaluator="model-type" condition="cggh:site">
		<forms>
			<!-- Create item form -->
			<form>
				<field-visibility>
					<!-- cggh:site type -->
					<show id="cggh:siteName" />
					<show id="cggh:siteCountry" />
					<show id="cm:latitude" />
					<show id="cm:longitude" />
				</field-visibility>
				<create-form template="../data-lists/forms/dataitem.ftl" />
				<appearance>

					<field id="cm:latitude" label-id="cm.metadata.latitude" />
					<field id="cm:longitude" label-id="cm.metadata.longitude" />
				</appearance>
			</form>
		</forms>
	</config>

	<!-- cggh:site type edit form config -->
	<config evaluator="node-type" condition="cggh:site">
		<forms>
			<!-- Data List pop-up edit form -->
			<form>
				<field-visibility>
					<!-- cggh:site type -->
					<show id="cggh:siteName" />
					<show id="cggh:siteCountry" />
					<show id="cm:latitude" />
					<show id="cm:longitude" />
				</field-visibility>
				<edit-form template="../data-lists/forms/dataitem.ftl" />
				<appearance>

					<field id="cm:latitude" label-id="cm.metadata.latitude" />
					<field id="cm:longitude" label-id="cm.metadata.longitude" />
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="st:site">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:title" force="true" />
					<show id="cm:description" force="true" />
				</field-visibility>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="cggh:publication">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name" />
					<show id="cm:title" force="true" />
					<show id="cm:description" force="true" />

					<show id="cggh:PMID" />
					
					<show id="cggh:citationText" />
					<show id="cggh:DOI" />
				</field-visibility>
				<appearance>
					<set id="cgghMetadata" appearance="bordered-panel"
						label-id="cggh.publication.metadata.header" />

					<field id="cggh:PMID" label-id="cggh.metadata.PMID" set="cgghMetadata">
						<control template="/org/alfresco/components/form/controls/number.ftl">
						</control>
					</field>
					<field id="cggh:DOI" label-id="cggh.metadata.DOI" set="cgghMetadata" />
					<field id="cggh:citationText" label-id="cggh.metadata.citation"
						set="cgghMetadata">
						<control template="/org/alfresco/components/form/controls/textarea.ftl">
						<!-- too flaky
						    <control-param name="editorAppearance">custom</control-param>
							<control-param name="editorParameters">
								theme_advanced_resizing: true,
								theme_advanced_buttons1: "bold,italic,underline",
								theme_advanced_buttons2: null,
								theme_advanced_buttons3: null
							</control-param>
						-->
						</control>
					</field>

				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="string-compare" condition="Remote">
		<remote>
			<keystore>
				<path>alfresco/web-extension/alfresco-system.p12</path>
				<type>pkcs12</type>
				<password>alfresco-system</password>
			</keystore>

			<connector>
				<id>alfrescoCookie</id>
				<name>Alfresco Connector</name>
				<description>Connects to an Alfresco instance using cookie-based
					authentication</description>
				<class>org.alfresco.web.site.servlet.SlingshotAlfrescoConnector
				</class>
			</connector>

			<connector>
				<id>alfrescoHeader</id>
				<name>Alfresco Connector</name>
				<description>Connects to an Alfresco instance using header and
					cookie-based authentication</description>
				<class>org.alfresco.web.site.servlet.SlingshotAlfrescoConnector
				</class>
				<userHeader>X-Alfresco-Remote-User</userHeader>
			</connector>

			<endpoint>
				<id>alfresco</id>
				<name>Alfresco - user access</name>
				<description>Access to Alfresco Repository WebScripts that require
					user authentication</description>
				<connector-id>alfrescoCookie</connector-id>
				<endpoint-url>http://localhost:8080/alfresco/wcs</endpoint-url>
				<identity>user</identity>
				<external-auth>true</external-auth>
			</endpoint>
		</remote>
	</config>

</alfresco-config>
