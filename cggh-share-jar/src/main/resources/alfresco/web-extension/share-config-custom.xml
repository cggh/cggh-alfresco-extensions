<alfresco-config>


	<config replace="true">
		<flags>
			<!-- Developer debugging setting to turn on DEBUG mode for client scripts 
				in the browser -->
			<client-debug>true</client-debug>

			<!-- LOGGING can always be toggled at runtime when in DEBUG mode (Ctrl, 
				Ctrl, Shift, Shift). This flag automatically activates logging on page load. -->
			<client-debug-autologging>false</client-debug-autologging>
		</flags>
		<header>
			<app-items>
				<!-- defaults: icon="{id}.png" label="header.{id}.label" description="header.{id}.description" -->
				<item type="link" id="my-dashboard">{userdashboardpage}</item>
				<item type="js" id="sites">Alfresco.module.Sites</item>
				<item type="link" id="repository" condition="conditionRepositoryRootNode">/repository</item>
				<item type="container" id="more">
					<container-group id="my">
						<item type="link" id="my-tasks">/my-tasks</item>
						<item type="link" id="my-workflows">/my-workflows</item>
						<item type="link" id="my-content">/user/user-content</item>
						<item type="link" id="my-sites">/user/user-sites</item>
						<item type="link" id="my-profile">{userprofilepage}</item>
						<item type="link" id="collaborations" label="Collaborations"
							description="View collaborations">/collaborations</item>
					</container-group>
					<container-group id="tools" permission="admin">
						<item type="link" id="application">/console/admin-console/application
						</item>
						<item type="link" id="groups">/console/admin-console/groups</item>
						<item type="link" id="replication-jobs" condition="!conditionEditionTeam">/console/admin-console/replication-jobs
						</item>
						<item type="link" id="repository">/console/admin-console/repository</item>
						<item type="link" id="trashcan">/console/admin-console/trashcan</item>
						<item type="link" id="users">/console/admin-console/users</item>
						<item type="link" id="more">/console/admin-console/</item>
					</container-group>
				</item>
			</app-items>
			<user-items>
				<item type="container" id="user" icon="" description="">
					<container-group id="usermenu" label="">
						<item type="user" id="status">{userprofilepage}</item>
						<item type="link" id="my-profile">{userprofilepage}</item>
						<item type="link" id="change-password" condition="user.capabilities.isMutable">/user/change-password
						</item>
						<item type="external-link" id="help">{share-help}</item>
						<item type="link" id="logout" condition="!context.externalAuthentication">/dologout</item>
					</container-group>
				</item>
			</user-items>
			<dependencies>
				<css src="/modules/create-site.css" />
				<css src="/modules/header/sites.css" />
				<js src="/modules/create-site.js" />
				<js src="/modules/header/sites.js" />
			</dependencies>
		</header>
	</config>
	<config evaluator="string-compare" condition="DocLibCustom">
		<dependencies>
			<js src="components/documentlibrary/contact-renderer.js" />
		</dependencies>
	</config>
	<!-- Document Library config section -->
	<config evaluator="string-compare" condition="DocumentLibrary">

		<tree>
			<!-- Whether the folder Tree component should enumerate child folders 
				or not. This is a relatively expensive operation, so should be set to "false" 
				for Repositories with broad folder structures. -->
			<evaluate-child-folders>false</evaluate-child-folders>

			<!-- Optionally limit the number of folders shown in treeview throughout 
				Share. -->
			<maximum-folder-count>-1</maximum-folder-count>
		</tree>

		<!-- Used by the "Manage Aspects" action For custom aspects, remember to 
			also add the relevant i18n string(s) cm_myaspect=My Aspect -->
		<aspects>
			<!-- Aspects that a user can see -->
			<visible>
				<aspect name="cm:generalclassifiable" />
				<aspect name="cm:complianceable" />
				<aspect name="cm:dublincore" />
				<aspect name="cm:effectivity" />
				<aspect name="cm:summarizable" />
				<aspect name="cm:versionable" />
				<aspect name="cm:templatable" />
				<aspect name="cm:emailed" />
				<aspect name="emailserver:aliasable" />
				<aspect name="cm:taggable" />
				<aspect name="app:inlineeditable" />
				<aspect name="gd:googleEditable" />
				<aspect name="cm:geographic" />
				<aspect name="exif:exif" />
				<aspect name="cggh:collaboration" />
			</visible>

			<!-- Aspects that a user can add. Same as "visible" if left empty -->
			<addable>
			</addable>

			<!-- Aspects that a user can remove. Same as "visible" if left empty -->
			<removeable>
			</removeable>
		</aspects>

		<!-- Used by the "Change Type" action Define valid subtypes using the following 
			example: <type name="cm:content"> <subtype name="cm:mysubtype" /> </type> 
			Remember to also add the relevant i18n string(s): cm_mysubtype=My SubType -->
		<types>
			<type name="cm:content">
			</type>

			<type name="cm:folder">
				<subtype name="cggh:collaborationFolder" />
			</type>
		</types>

		<metadata-templates>
			<template id="isCollaboration">
				<evaluator>evaluator.doclib.metadata.hasCollaborationAspect
				</evaluator>
				<line index="10" id="date" view="detailed">{date}{size}</line>
				<line index="20" id="tags" view="detailed">{tags}</line>
				<line index="30" id="description" view="detailed">{description}</line>
				<line index="50" id="contact" view="detailed">{cggh_collaborationStatus
					cggh.metadata.statusType} {cggh_enquiryStatus}
					{cggh_contacts
					cggh.metadata.contactsType}
					{cggh_liaison}
				</line>
				<line index="70" id="species" view="detailed">{cggh_species}
					{cggh_sampleCountry}
				</line>
			</template>

		</metadata-templates>

	</config>
	<config evaluator="string-compare" condition="DocLibActions">



		<actionGroups>
			<actionGroup id="folder-browse">
				<action index="350" id="document-view-googlemaps" />
			</actionGroup>
			<actionGroup id="folder-details">
				<action index="350" id="document-view-googlemaps" />
			</actionGroup>
		</actionGroups>
	</config>
	<config evaluator="string-compare" condition="Action Wizards">
		<aspects>
			<aspect name="cm:generalclassifiable" />
			<aspect name="cm:complianceable" />
			<aspect name="cm:dublincore" />
			<aspect name="cm:effectivity" />
			<aspect name="cm:summarizable" />
			<aspect name="cm:versionable" />
			<aspect name="cm:templatable" />
			<aspect name="cm:emailed" />
			<aspect name="emailserver:aliasable" />
			<aspect name="cm:taggable" />
			<aspect name="app:inlineeditable" />
			<aspect name="gd:googleEditable" />
			<aspect name="cm:geographic" />
			<aspect name="exif:exif" />
			<aspect name="cggh:collaboration" />
		</aspects>
	</config>

	<!-- Repository Library config section -->
	<config evaluator="string-compare" condition="RepositoryLibrary"
		replace="true">
		<!-- Whether the link to the Repository Library appears in the header component 
			or not. -->
		<visible>true</visible>
	</config>

	<config evaluator="string-compare" condition="Remote">
		<remote>
			<endpoint>
				<id>alfresco-noauth</id>
				<name>Alfresco - unauthenticated access</name>
				<description>Access to Alfresco Repository WebScripts that do not
					require authentication
				</description>
				<connector-id>alfresco</connector-id>
				<endpoint-url>http://localhost:8080/alfresco/s</endpoint-url>
				<identity>none</identity>
			</endpoint>

			<endpoint>
				<id>alfresco</id>
				<name>Alfresco - user access</name>
				<description>Access to Alfresco Repository WebScripts that require
					user authentication
				</description>
				<connector-id>alfresco</connector-id>
				<endpoint-url>http://localhost:8080/alfresco/s</endpoint-url>
				<identity>user</identity>
			</endpoint>

			<endpoint>
				<id>alfresco-feed</id>
				<name>Alfresco Feed</name>
				<description>Alfresco Feed - supports basic HTTP authentication via
					the EndPointProxyServlet
				</description>
				<connector-id>http</connector-id>
				<endpoint-url>http://localhost:8080/alfresco/s</endpoint-url>
				<basic-auth>true</basic-auth>
				<identity>user</identity>
			</endpoint>

			<endpoint>
				<id>activiti-admin</id>
				<name>Activiti Admin UI - user access</name>
				<description>Access to Activiti Admin UI, that requires user
					authentication
				</description>
				<connector-id>activiti-admin-connector</connector-id>
				<endpoint-url>http://localhost:8080/alfresco/activiti-admin
				</endpoint-url>
				<identity>user</identity>
			</endpoint>
		</remote>
	</config>
	<config evaluator="string-compare" condition="AdvancedSearch">
		<advanced-search>
			<!-- Additional Forms for the advanced search type list -->
			<forms>
				<form label="Collaboration Folders" description="Searches for all Collaboration Folders">cggh:collaborationFolder
				</form>
			</forms>
		</advanced-search>
	</config>

	<config evaluator="node-type" condition="cggh:collaborationFolder">
		<forms>
			<form>
				<field-visibility>
					<!-- cm:folder -->
					<show id="cm:name" />
					<show id="cm:title" force="true" />
					<show id="cm:description" force="true" />
					<show id="cm:taggable" for-mode="edit" force="true" />
					<show id="cm:categories" />

					<!-- cggh:collaborationFolder -->
					<show id="cggh:collaborationStatus" />
					<show id="cggh:enquiryStatus" />
					<show id="cggh:contactList" />
					<show id="cggh:liaison" force="true" />
					<show id="cggh:species" />
					<show id="cggh:sampleCountry" />
					<show id="cggh:collaborationNotes" />
				</field-visibility>
				<appearance>
					<!-- Field sets -->
					<set id="cgghMetadata" appearance="bordered-panel"
						label-id="cggh.collaborationFolder.metadata.header" />

					<!-- Field set "" -->
					<field id="cm:title">
						<control template="/org/alfresco/components/form/controls/textfield.ftl" />
					</field>
					<field id="cm:description">
						<control>
							<control-param name="activateLinks">true</control-param>
						</control>
					</field>
					<field id="cm:taggable">
						<control>
							<control-param name="compactMode">true</control-param>
							<control-param name="params">aspect=cm:taggable
							</control-param>
							<control-param name="createNewItemUri">/api/tag/workspace/SpacesStore
							</control-param>
							<control-param name="createNewItemIcon">tag</control-param>
						</control>
					</field>
					<field id="cm:categories">
						<control>
							<control-param name="compactMode">true</control-param>
						</control>
					</field>

					<!-- Field set "cgghMetadata" -->
					<field id="cggh:collaborationStatus" label-id="cggh.metadata.collaborationStatus"
						set="cgghMetadata" />
					<field id="cggh:enquiryStatus" label-id="cggh.metadata.enquiryStatus"
						set="cgghMetadata" />
					<field id="cggh:contactList" label-id="cggh.metadata.contacts"
						set="cgghMetadata">
						<control template="/org/alfresco/components/form/controls/association.ftl">
							<control-param name="startLocation">//cm:External_Contacts
							</control-param>
						</control>
					</field>
					<field id="cggh:liaison" label-id="cggh.metadata.liaison"
						set="cgghMetadata">
						<control template="/org/alfresco/components/form/controls/authority.ftl">
							<control-param name="compactMode">true</control-param>
							<control-param name="forceEditable">true</control-param>
						</control>
					</field>
					<field id="cggh:sampleCountry" label-id="cggh.metadata.studySites"
						set="cgghMetadata" />

					<field id="cggh:species" label-id="cggh.metadata.species"
						set="cgghMetadata" />
					<field id="cggh:collaborationNotes" set="cgghMetadata">
						<control template="/org/alfresco/components/form/controls/textarea.ftl" />
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<!-- SEARCH form definition -->
	<config evaluator="model-type" condition="cggh:collaborationFolder">
		<forms>
			<form id="search">
				<field-visibility>
					<show id="cm:name" />
					<show id="cm:title" force="true" />
					<show id="cm:description" force="true" />

					<!-- cggh:collaborationFolder -->

					<show id="cggh:contacts" force="true" />
					<show id="cggh:species" />
					<show id="cggh:sampleCountry" />
				</field-visibility>
				<appearance>
					<set id="cgghMetadata" appearance="bordered-panel"
						label-id="cggh.metadata.collaborationFolder" />

					<field id="cggh:contacts" label-id="cggh.metadata.contacts"
						set="cgghMetadata">
					</field>
					<field id="cggh:species" label-id="cggh.metadata.species"
						set="cgghMetadata" />
					<field id="cggh:sampleCountry" label-id="cggh.metadata.sampleCountry"
						set="cgghMetadata" />

				</appearance>
			</form>
		</forms>
	</config>
	<!-- cggh:site type create form config -->
	<config evaluator="model-type" condition="cggh:site">
		<forms>
			<!-- Create item form -->
			<form>
				<field-visibility>
					<!-- cggh:site type -->
					<show id="cggh:siteName" />
					<show id="cggh:siteCountry" />
					<show id="cm:latitude" />
					<show id="cm:longitude" />
				</field-visibility>
				<create-form template="../data-lists/forms/dataitem.ftl" />
				<appearance>

					<field id="cm:latitude" label-id="cm.metadata.latitude" />
					<field id="cm:longitude" label-id="cm.metadata.longitude" />
				</appearance>
			</form>
		</forms>
	</config>

	<!-- cggh:site type edit form config -->
	<config evaluator="node-type" condition="cggh:site">
		<forms>
			<!-- Data List pop-up edit form -->
			<form>
				<field-visibility>
					<!-- cggh:site type -->
					<show id="cggh:siteName" />
					<show id="cggh:siteCountry" />
					<show id="cm:latitude" />
					<show id="cm:longitude" />
				</field-visibility>
				<edit-form template="../data-lists/forms/dataitem.ftl" />
				<appearance>

					<field id="cm:latitude" label-id="cm.metadata.latitude" />
					<field id="cm:longitude" label-id="cm.metadata.longitude" />
				</appearance>
			</form>
		</forms>
	</config>

</alfresco-config>
